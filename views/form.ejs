<div id="wrapper">
	<div id="main">
		<div class="text-xl font-mono max-w-lg w-full">

			<div id="part-0" class="w-full hidden">
				<img src="assets/images/image03.png" alt="" />
				<button class="bg-black px-4 py-2 rounded-full text-white" onclick="next()">Start</button>
			</div>

			<form id="part-1" onsubmit="submitForm(this)" class="hidden space-y-2 flex-col flex mx-auto w-full  max-w-xl">
				<h3 class="text-3xl">What gets your hard(or soft)ware going?</h3>

					<label class="flex space-x-4 bg-white rounded p-2 border justify-between">
						<p class="px-2"> Hardware</p>
						<input type="radio" name="type" value="hardware" class="my-auto" >
					</label>
					<label class="flex space-x-4 bg-white rounded p-2 border justify-between">
						<p class="px-2">Software</p>
						<input type="radio" name="type" value="software" class="my-auto" >
					</label>
					<label class="flex space-x-4 bg-white rounded p-2 border justify-between">
						<p class="px-2"> Making Friends</p>
						<input type="radio" name="type" value="friends" class="my-auto" >
					</label>
					<label class="flex space-x-4 bg-white rounded p-2 border justify-between">
						<p class="px-2">Gettin' Work Done!</p>
						<input type="radio" name="type" value="productivity" class="my-auto" >
					</label>
					<label class="flex space-x-4 bg-white rounded p-2 border justify-between">
						<p class="px-2">All Of The Above</p>
						<input type="radio" name="type" value="all" class="my-auto" >
					</label>
					
				<input type="submit" value="Next" class="bg-black px-4 py-2 rounded-full text-white cursor-pointer ">
				<a onclick="back()" class="underline text-black cursor-pointer text-sm"> Back </a>
			</form>

			<form id="part-2" onsubmit="submitForm(this)" class="hidden space-y-2 flex-col flex mx-auto w-full  max-w-xl">
					<h3 class="text-3xl">What would you say best describes you?</h3>
					
					<label class="flex space-x-4 bg-white rounded p-2 border justify-between">
						<p class="px-2"> Total Beginner </p>
						<input type="radio" name="type" value="Beginner" class="my-auto" >
					</label>
					<label class="flex space-x-4 bg-white rounded p-2 border justify-between">
						<p class="px-2"> Casual Hobbiest </p>
						<input type="radio" name="type" value="Hobbiest" class="my-auto" >
					</label>
					<label class="flex space-x-4 bg-white rounded p-2 border justify-between">
						<p class="px-2">Entreprenure or  Startup</p>
						<input type="radio" name="type" value="entreprenure" class="my-auto" >
					</label>
					<label class="flex space-x-4 bg-white rounded p-2 border justify-between">
						<p class="px-2">Serious Developer</p>
						<input type="radio" name="type" value="developer" class="my-auto" >
					</label> 
				
				
				<input type="submit" value="Next" class="bg-black px-4 py-2 rounded-full text-white cursor-pointer">
				<a onclick="back()" class="underline text-black cursor-pointer text-sm"> Back </a>
			</form>

			<form id="part-3" onsubmit="submitForm(this)" class="hidden space-y-2 flex-col flex mx-auto w-full  max-w-xl">
					<h3 class="text-3xl">What tool would you run too first in the lab?</h3>
					
					<label class="flex space-x-4 bg-white rounded p-2 border justify-between">
						<p class="px-2"> 3D Printer </p>
						<input type="radio" name="type" value="Beginner" class="my-auto" >
					</label>
					<label class="flex space-x-4 bg-white rounded p-2 border justify-between">
						<p class="px-2"> Lazer Cutter </p>
						<input type="radio" name="type" value="Hobbiest" class="my-auto" >
					</label>
					<label class="flex space-x-4 bg-white rounded p-2 border justify-between">
						<p class="px-2">Epic Gaming Rig</p>
						<input type="radio" name="type" value="entreprenure" class="my-auto" >
					</label>
					<label class="flex space-x-4 bg-white rounded p-2 border justify-between">
						<p class="px-2">Productivity Workspation</p>
						<input type="radio" name="type" value="developer" class="my-auto" >
					</label> 
					<label class="flex space-x-4 bg-white rounded p-2 border justify-between">
						<p class="px-2">Electronics Lab</p>
						<input type="radio" name="type" value="developer" class="my-auto" >
					</label> 
				
				<input type="submit" value="Next" class="bg-black px-4 py-2 rounded-full text-white cursor-pointer">
				<a onclick="back()" class="underline text-black cursor-pointer text-sm"> Back </a>
			</form>

			<form id="part-4" onsubmit="submitForm(this)" class="hidden space-y-2 flex-col flex mx-auto w-full  max-w-xl">
					<h3 class="text-3xl">How far would you commute to have all this?</h3>
					<span class="flex space-x-4 bg-white rounded p-2 border w-full">
						<p class="flex-grow">Up to</p>
						<select class="flex w-1/3 ">
						<option value="By Foot" class="my-auto" >15 Mins</option>
						<option value="By Foot" class="my-auto" >30 Mins</option>
						<option value="By Foot" class="my-auto" >45 Mins</option>
						<option value="By Foot" class="my-auto" >60 Mins</option>
						</select>
						
						<select class="flex w-1/3" >
						<option value="By Foot" class="my-auto" >By Foot</option>
						<option value="By Foot" class="my-auto" >By Bike</option>
						<option value="By Foot" class="my-auto" >By Car</option>
						<option value="By Foot" class="my-auto" >By Public Transport</option>
						</select>
					</span>

					<p> from </p>
					<input class="bg-white rounded p-2 border 
					w-full " type="text" name="" placeholder="Address 1">
					<input class="bg-white rounded p-2 border w-full " type="text" name="" placeholder="Address 2">
					<input class="bg-white rounded p-2 border w-full " type="text" name="" placeholder="Town">
					<input class="bg-white rounded p-2 border w-full " type="text" name="" placeholder="Postcode">
					
				
				<input type="submit" value="Next" class="bg-black px-4 py-2 rounded-full text-white cursor-pointer">
				<a onclick="back()" class="underline text-black cursor-pointer text-sm"> Back </a>
			</form>

			<form id="part-5" onsubmit="submitForm(this)" class="hidden space-y-2 flex-col flex mx-auto w-full  max-w-xl">
					<h3 class="text-3xl">And Finally, would you give us your details so we can get in touch?</h3>
					
					<label class="flex space-x-4 bg-white rounded p-2 border justify-between">
						<p class="px-2"> Name </p>
						<input type="text" name="type" value="" class="my-auto flex-grow" >
					</label>
					<label class="flex space-x-4 bg-white rounded p-2 border justify-between">
						<p class="px-2"> Email </p>
						<input type="text" name="type" value="" class="my-auto flex-grow" >
					</label>
					<label class="flex space-x-4 bg-white rounded p-2 border justify-between">
						<input type="checkbox" name="type" value="" class="my-auto flex-grow p-2" >
						<p class="text-xs max-w-sm px-4"> Yes, I want you to get in touch. I have come this far haven't I?! </p>
						
						
					</label>
				
				<input type="hidden" name="done" value="true">
				<input type="submit" value="Submit" class="bg-black px-4 py-2 rounded-full text-white cursor-pointer">
				<a onclick="back()" class="underline text-black cursor-pointer text-sm"> Back </a>
			</form>

		</div>
	</div>
</div>

<script type="text/javascript">
	let session = localStorage.getItem('session')
	let progress = localStorage.getItem('progress')
	
	if(!session) {
		session = Math.random().toString().slice(-10)
		localStorage.setItem('session', session)
	}
	
	if(!progress) {
		progress = 0
		localStorage.setItem('progress', progress)
	}

	document.getElementById(`part-${progress}`).classList.remove('hidden')

	let next = () => {
		document.getElementById(`part-${progress}`).classList.add('hidden'); 
		document.getElementById(`part-${Number(progress)+1}`).classList.remove('hidden')
		progress++
		localStorage.setItem('progress', progress)
	}

	let back = () => {
		document.getElementById(`part-${progress}`).classList.add('hidden'); 
		document.getElementById(`part-${Number(progress)-1}`).classList.remove('hidden')
		progress--
		localStorage.setItem('progress', progress)
	}

	let submitForm = async (form) => {
		let formData = new FormData(form)
		formData.append('session', session)

		var response = await fetch("/submit" , {
          method: 'POST',
          headers: {
          'Content-Type' : 'application/json'
          },
          body: JSON.stringify(Object.fromEntries(formData))
        });

        var body = await response.json();
        if(body.done){
        	localStorage.clear()
        	return location.href = "/"
        }
        if(body.success){
        	return next()
        }
	}


</script>